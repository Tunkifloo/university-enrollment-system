spring.application.name=API-matriculas

# CONFIGURACIÓN DEL SERVIDOR
server.port=${SERVER_PORT:8080}
server.servlet.context-path=${SERVER_CONTEXT_PATH:/api/v1}

# Configuración de codificación
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# CONFIGURACIÓN DE POSTGRESQL
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:matriculas_db}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:admin}
spring.datasource.driver-class-name=org.postgresql.Driver

# Pool de conexiones
spring.datasource.hikari.maximum-pool-size=${DB_POOL_MAX_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${DB_POOL_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# CONFIGURACIÓN JPA/HIBERNATE
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:true}
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.jdbc.time_zone=${APP_TIMEZONE:America/Lima}

# Habilitar estadísticas de Hibernate
spring.jpa.properties.hibernate.generate_statistics=false

# CONFIGURACIÓN DE LOGGING
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.com.springback.apimatriculas=${LOG_LEVEL_APP:DEBUG}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:DEBUG}
logging.level.org.hibernate.SQL=${LOG_LEVEL_SQL:DEBUG}
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Patrón de logging
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# CONFIGURACIÓN DE ACTUATOR
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info,metrics}
management.endpoint.health.show-details=${ACTUATOR_SHOW_DETAILS:always}

# Información de la aplicación
info.app.name=${APP_NAME:API Sistema de Matrículas}
info.app.description=${APP_DESCRIPTION:API REST para gestión de matrículas universitarias}
info.app.version=${APP_VERSION:1.0.0}

# CONFIGURACIÓN DE SWAGGER/OPENAPI
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=${SWAGGER_PATH:/swagger-ui.html}
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:true}
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha

# CONFIGURACIÓN DE FORMATO DE FECHA
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=${APP_TIMEZONE:America/Lima}
spring.jackson.default-property-inclusion=non_null